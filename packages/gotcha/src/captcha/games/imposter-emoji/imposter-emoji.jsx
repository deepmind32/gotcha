import { useState } from "react";
import { range } from "../../../utils/python";
import { get_random_samples, shuffle } from "../../utils";
import styles from "./imposter-emoji.module.css";
import Timer from "../../../components/timer/timer";

const COLLECTIONS = [
	"😀",
	"😃",
	"😄",
	"😁",
	"😆",
	"😅",
	"😂",
	"🤣",
	"😭",
	"😉",
	"😗",
	"😙",
	"😚",
	"😘",
	"🥰",
	"😍",
	"🤩",
	"🥳",
	"🙃",
	"🙂",
	"🥲",
	"🥹",
	"😋",
	"😛",
	"😝",
	"😜",
	"🤪",
	"😇",
	"😊",
	"☺️",
	"😏",
	"😌",
	"😔",
	"😑",
	"😐",
	"😶",
	"🫡",
	"🤔",
	"🤫",
	"🫢",
	"🤭",
	"🥱",
	"🤗",
	"🫣",
	"😱",
	"🤨",
	"🧐",
	"😒",
	"🙄",
	"😮‍💨",
	"😤",
	"😠",
	"😡",
	"🤬",
	"🥺",
	"😟",
	"😥",
	"😢",
	"☹️",
	"🙁",
	"🫤",
	"😕",
	"🤐",
	"😰",
	"😨",
	"😧",
	"😦",
	"😮",
	"😯",
	"😲",
	"😳",
	"🤯",
	"😬",
	"😓",
	"😞",
	"😖",
	"😣",
	"😩",
	"😫",
	"😵",
	"😵‍💫",
	"🫥",
	"😴",
	"😪",
	"🤤",
	"🌛",
	"🌜",
	"🌚",
	"🌝",
	"🌞",
	"🫠",
	"😶‍🌫️",
	"🥴",
	"🥵",
	"🥶",
	"🤢",
	"🤮",
	"🤧",
	"🤒",
	"🤕",
	"😷",
	"🤠",
	"🤑",
	"😎",
	"🤓",
	"🥸",
	"🤥",
	"🤡",
	"👻",
	"💩",
	"👽",
	"🤖",
	"🎃",
	"😈",
	"👿",
	"👹",
	"👺",
	"🔥",
	"💫",
	"⭐",
	"🌟",
	"✨",
	"💥",
	"💯",
	"💢",
	"💨",
	"💦",
	"🫧",
	"💤",
	"🕳️",
	"🎉",
	"🎊",
	"🙈",
	"🙉",
	"🙊",
	"😺",
	"😸",
	"😹",
	"😻",
	"😼",
	"😽",
	"🙀",
	"😿",
	"😾",
	"❤️",
	"🧡",
	"💛",
	"💚",
	"💙",
	"💜",
	"🤎",
	"🖤",
	"🤍",
	"♥️",
	"💘",
	"💝",
	"💖",
	"💗",
	"💓",
	"💞",
	"💕",
	"💌",
	"💟",
	"❣️",
	"❤️‍🩹",
	"💔",
	"❤️‍🔥",
	"💋",
	"🫂",
	"👥",
	"👤",
	"🗣️",
	"👣",
	"🧠",
	"🫀",
	"🫁",
	"🩸",
	"🦠",
	"🦷",
	"🦴",
	"☠️",
	"💀",
	"👀",
	"👁️",
	"👄",
	"🫦",
	"👅",
	"👃",
	"👂",
	"🦻",
	"🦶",
	"🦵",
	"🦿",
	"🦾",
	"💪",
	"👍",
	"👎",
	"👏",
	"🫶",
	"🙌",
	"👐",
	"🤲",
	"🤝",
	"🤜",
	"🤛",
	"✊",
	"👊",
	"🫳",
	"🫴",
	"🫱",
	"🫲",
	"🤚",
	"👋",
	"🖐️",
	"✋",
	"🖖",
	"🤟",
	"🤘",
	"✌️",
	"🤞",
	"🫰",
	"🤙",
	"🤌",
	"🤏",
	"👌",
	"🖕",
	"☝️",
	"👆",
	"👇",
	"👉",
	"👈",
	"🫵",
	"✍️",
	"🤳",
	"🙏",
	"💅",
	"🙇",
	"🙋",
	"💁",
	"🙆",
	"🙅",
	"🤷",
	"🤦",
	"🙍",
	"🙎",
	"🧏",
	"💆",
	"💇",
	"🧖",
	"🛀",
	"🛌",
	"🧘",
	"🧑‍🦯",
	"🧑‍🦼",
	"🧑‍🦽",
	"🧎",
	"🧍",
	"🚶",
	"🏃",
	"🤸",
	"🏋️",
	"⛹️",
	"🤾",
	"🚴",
	"🚵",
	"🧗",
	"🤼",
	"🤹",
	"🏌️",
	"🏇",
	"🤺",
	"⛷️",
	"🏂",
	"🪂",
	"🏄",
	"🚣",
	"🏊",
	"🤽",
	"🧜",
	"🧚",
	"🧞",
	"🧝",
	"🧙",
	"🧛",
	"🧟",
	"🧌",
	"🦸",
	"🦹",
	"🥷",
	"🧑‍🎄",
	"👼",
	"💂",
	"🫅",
	"🤵",
	"👰",
	"🧑‍🚀",
	"👷",
	"👮",
	"🕵️",
	"🧑‍✈️",
	"🧑‍🔬",
	"🧑‍⚕️",
	"🧑‍🔧",
	"🧑‍🏭",
	"🧑‍🚒",
	"🧑‍🌾",
	"🧑‍🏫",
	"🧑‍🎓",
	"🧑‍💼",
	"🧑‍⚖️",
	"🧑‍💻",
	"🧑‍🎤",
	"🧑‍🎨",
	"🧑‍🍳",
	"👳",
	"🧕",
	"👲",
	"👶",
	"🧒",
	"🧑",
	"🧓",
	"🧑‍🦳",
	"🧑‍🦰",
	"👱",
	"🧑‍🦱",
	"🧑‍🦲",
	"🧔",
	"🕴️",
	"💃",
	"🕺",
	"👯",
	"🧑‍🤝‍🧑",
	"👭",
	"👬",
	"👫",
	"💏",
	"👩‍❤️‍💋‍👨",
	"👨‍❤️‍💋‍👨",
	"👩‍❤️‍💋‍👩",
	"💑",
	"👩‍❤️‍👨",
	"👨‍❤️‍👨",
	"👩‍❤️‍👩",
	"🫄",
	"🤱",
	"🧑‍🍼",
	"👪",
	"💐",
	"🌹",
	"🥀",
	"🌺",
	"🌷",
	"🪷",
	"🌸",
	"💮",
	"🏵️",
	"🌻",
	"🌼",
	"🍂",
	"🍁",
	"🍄",
	"🌾",
	"🌱",
	"🌿",
	"🍃",
	"☘️",
	"🍀",
	"🪴",
	"🌵",
	"🌴",
	"🌳",
	"🌲",
	"🪹",
	"🪺",
	"🪵",
	"🪨",
	"⛰️",
	"🏔️",
	"❄️",
	"☃️",
	"⛄",
	"🌊",
	"🫧",
	"🌬️",
	"🌀",
	"🌪️",
	"🌁",
	"🌫️",
	"🌡️",
	"🔥",
	"🌋",
	"🏜️",
	"🏞️",
	"🏖️",
	"⛱️",
	"🌅",
	"🌄",
	"☀️",
	"🌤️",
	"⛅",
	"🌥️",
	"🌦️",
	"☁️",
	"🌨️",
	"⛈️",
	"🌩️",
	"🌧️",
	"💧",
	"☔",
	"⚡",
	"🌈",
	"⭐",
	"🌟",
	"💫",
	"✨",
	"🌙",
	"☄️",
	"🌠",
	"🌌",
	"🪐",
	"🌑",
	"🌒",
	"🌓",
	"🌔",
	"🌕",
	"🌖",
	"🌗",
	"🌘",
	"🌍",
	"🌎",
	"🌏",
	"🙈",
	"🙉",
	"🙊",
	"🐵",
	"🦁",
	"🐯",
	"🐱",
	"🐶",
	"🐺",
	"🐻",
	"🐻‍❄️",
	"🐨",
	"🐼",
	"🐹",
	"🐭",
	"🐰",
	"🦊",
	"🦝",
	"🐮",
	"🐷",
	"🐽",
	"🐗",
	"🦓",
	"🦄",
	"🐴",
	"🐸",
	"🐲",
	"🦎",
	"🐉",
	"🦖",
	"🦕",
	"🐢",
	"🐊",
	"🐍",
	"🐁",
	"🐀",
	"🐇",
	"🐈",
	"🐈‍⬛",
	"🐩",
	"🐕",
	"🦮",
	"🐕‍🦺",
	"🐅",
	"🐆",
	"🐎",
	"🐖",
	"🐄",
	"🐂",
	"🐃",
	"🦬",
	"🐏",
	"🐑",
	"🐐",
	"🦌",
	"🦙",
	"🦥",
	"🦘",
	"🐘",
	"🦣",
	"🦏",
	"🦛",
	"🦒",
	"🐒",
	"🦍",
	"🦧",
	"🐪",
	"🐫",
	"🐿️",
	"🦫",
	"🦨",
	"🦡",
	"🦔",
	"🦦",
	"🦇",
	"🪶",
	"🦅",
	"🦉",
	"🐓",
	"🐔",
	"🐣",
	"🐤",
	"🐥",
	"🐦",
	"🦜",
	"🕊️",
	"🦤",
	"🦢",
	"🦩",
	"🦚",
	"🦃",
	"🦆",
	"🐧",
	"🦭",
	"🦈",
	"🐬",
	"🐋",
	"🐳",
	"🐟",
	"🐠",
	"🐡",
	"🦐",
	"🦞",
	"🦀",
	"🦑",
	"🐙",
	"🦪",
	"🪸",
	"🦂",
	"🕷️",
	"🕸️",
	"🐚",
	"🐌",
	"🐜",
	"🦗",
	"🪲",
	"🦟",
	"🪳",
	"🪰",
	"🐝",
	"🐞",
	"🦋",
	"🐛",
	"🪱",
	"🦠",
	"🐾",
	"🍓",
	"🍒",
	"🍎",
	"🍉",
	"🍑",
	"🍊",
	"🥭",
	"🍍",
	"🍌",
	"🍋",
	"🍈",
	"🍏",
	"🍐",
	"🥝",
	"🫒",
	"🫐",
	"🍇",
	"🥥",
	"🍅",
	"🌶️",
	"🥕",
	"🍠",
	"🧅",
	"🌽",
	"🥦",
	"🥒",
	"🥬",
	"🫑",
	"🥑",
	"🍆",
	"🧄",
	"🥔",
	"🫘",
	"🌰",
	"🥜",
	"🍞",
	"🫓",
	"🥐",
	"🥖",
	"🥯",
	"🧇",
	"🥞",
	"🍳",
	"🥚",
	"🧀",
	"🥓",
	"🥩",
	"🍗",
	"🍖",
	"🍔",
	"🌭",
	"🥪",
	"🥨",
	"🍟",
	"🍕",
	"🫔",
	"🌮",
	"🌯",
	"🥙",
	"🧆",
	"🥘",
	"🍝",
	"🥫",
	"🫕",
	"🥣",
	"🥗",
	"🍲",
	"🍛",
	"🍜",
	"🦪",
	"🦞",
	"🍣",
	"🍤",
	"🥡",
	"🍚",
	"🍱",
	"🥟",
	"🍢",
	"🍙",
	"🍘",
	"🍥",
	"🍡",
	"🥠",
	"🥮",
	"🍧",
	"🍨",
	"🍦",
	"🥧",
	"🍰",
	"🍮",
	"🎂",
	"🧁",
	"🍭",
	"🍬",
	"🍫",
	"🍩",
	"🍪",
	"🍯",
	"🧂",
	"🧈",
	"🍿",
	"🧊",
	"🫙",
	"🥤",
	"🧋",
	"🧃",
	"🥛",
	"🍼",
	"🍵",
	"☕",
	"🫖",
	"🧉",
	"🍺",
	"🍻",
	"🥂",
	"🍾",
	"🍷",
	"🥃",
	"🫗",
	"🍸",
	"🍹",
	"🍶",
	"🥢",
	"🍴",
	"🥄",
	"🔪",
	"🍽️",
	"🛑",
	"🚧",
	"🚨",
	"⛽",
	"🛢️",
	"🧭",
	"🛞",
	"🛟",
	"⚓",
	"🚏",
	"🚇",
	"🚥",
	"🚦",
	"🛴",
	"🦽",
	"🦼",
	"🩼",
	"🚲",
	"🛵",
	"🏍️",
	"🚙",
	"🚗",
	"🛻",
	"🚐",
	"🚚",
	"🚛",
	"🚜",
	"🏎️",
	"🚒",
	"🚑",
	"🚓",
	"🚕",
	"🛺",
	"🚌",
	"🚈",
	"🚝",
	"🚅",
	"🚄",
	"🚂",
	"🚃",
	"🚋",
	"🚎",
	"🚞",
	"🚊",
	"🚉",
	"🚍",
	"🚔",
	"🚘",
	"🚖",
	"🚆",
	"🚢",
	"🛳️",
	"🛥️",
	"🚤",
	"⛴️",
	"⛵",
	"🛶",
	"🚟",
	"🚠",
	"🚡",
	"🚁",
	"🛸",
	"🚀",
	"✈️",
	"🛫",
	"🛬",
	"🛩️",
	"🛝",
	"🎢",
	"🎡",
	"🎠",
	"🎪",
	"🗼",
	"🗽",
	"🗿",
	"🗻",
	"🏛️",
	"💈",
	"⛲",
	"⛩️",
	"🕍",
	"🕌",
	"🕋",
	"🛕",
	"⛪",
	"💒",
	"🏩",
	"🏯",
	"🏰",
	"🏗️",
	"🏢",
	"🏭",
	"🏬",
	"🏪",
	"🏟️",
	"🏦",
	"🏫",
	"🏨",
	"🏣",
	"🏤",
	"🏥",
	"🏚️",
	"🏠",
	"🏡",
	"🏘️",
	"🛖",
	"⛺",
	"🏕️",
	"🏙️",
	"🌆",
	"🌇",
	"🌃",
	"🌉",
	"🌁",
	"🛤️",
	"🛣️",
	"🏝️",
	"🗾",
	"🗺️",
	"🌐",
	"💺",
	"🧳",
	"🎉",
	"🎊",
	"🎈",
	"🎂",
	"🎀",
	"🎁",
	"🎇",
	"🎆",
	"🧨",
	"🧧",
	"🪔",
	"🪅",
	"🪩",
	"🎐",
	"🎏",
	"🎎",
	"🎑",
	"🎍",
	"🎋",
	"🎄",
	"🎃",
	"🎗️",
	"🥇",
	"🥈",
	"🥉",
	"🏅",
	"🎖️",
	"🏆",
	"📢",
	"⚽",
	"⚾",
	"🥎",
	"🏀",
	"🏐",
	"🏈",
	"🏉",
	"🎾",
	"🥅",
	"🏸",
	"🥍",
	"🏏",
	"🏑",
	"🏒",
	"🥌",
	"🛷",
	"🎿",
	"⛸️",
	"🛼",
	"🩰",
	"🛹",
	"⛳",
	"🎯",
	"🏹",
	"🥏",
	"🪃",
	"🪁",
	"🎣",
	"🤿",
	"🩱",
	"🎽",
	"🥋",
	"🥊",
	"🎱",
	"🏓",
	"🎳",
	"♟️",
	"🪀",
	"🧩",
	"🎮",
	"🕹️",
	"👾",
	"🔫",
	"🎲",
	"🎰",
	"🎴",
	"🀄",
	"🃏",
	"🪄",
	"🎩",
	"📷",
	"📸",
	"🖼️",
	"🎨",
	"🖌️",
	"🖍️",
	"🪡",
	"🧵",
	"🧶",
	"🎹",
	"🎷",
	"🎺",
	"🎸",
	"🪕",
	"🎻",
	"🪘",
	"🥁",
	"🪗",
	"🎤",
	"🎧",
	"🎚️",
	"🎛️",
	"🎙️",
	"📻",
	"📺",
	"📼",
	"📹",
	"📽️",
	"🎥",
	"🎞️",
	"🎬",
	"🎭",
	"🎫",
	"🎟️",
	"📱",
	"☎️",
	"📞",
	"📟",
	"📠",
	"🔌",
	"🔋",
	"🪫",
	"🖲️",
	"💽",
	"💾",
	"💿",
	"📀",
	"🖥️",
	"💻",
	"⌨️",
	"🖨️",
	"🖱️",
	"🪙",
	"💸",
	"💵",
	"💴",
	"💶",
	"💷",
	"💳",
	"💰",
	"🧾",
	"🧮",
	"⚖️",
	"🛒",
	"🛍️",
	"🕯️",
	"💡",
	"🔦",
	"🏮",
	"🧱",
	"🪟",
	"🪞",
	"🚪",
	"🪑",
	"🛏️",
	"🛋️",
	"🚿",
	"🛁",
	"🚽",
	"🧻",
	"🪠",
	"🧸",
	"🪆",
	"🧷",
	"🪢",
	"🧹",
	"🧴",
	"🧽",
	"🧼",
	"🪥",
	"🪒",
	"🧺",
	"🧦",
	"🧤",
	"🧣",
	"👖",
	"👕",
	"🎽",
	"👚",
	"👔",
	"👗",
	"👘",
	"🥻",
	"🩱",
	"👙",
	"🩳",
	"🩲",
	"🧥",
	"🥼",
	"🦺",
	"⛑️",
	"🪖",
	"🎓",
	"🎩",
	"👒",
	"🧢",
	"👑",
	"🎒",
	"👝",
	"👛",
	"👜",
	"💼",
	"🧳",
	"☂️",
	"🌂",
	"💍",
	"💎",
	"💄",
	"👠",
	"👟",
	"👞",
	"🥿",
	"🩴",
	"👡",
	"👢",
	"🥾",
	"👓",
	"🕶️",
	"🦯",
	"🥽",
	"⚗️",
	"🧫",
	"🧪",
	"🌡️",
	"🧬",
	"💉",
	"💊",
	"🩹",
	"🩺",
	"🩻",
	"🔭",
	"🔬",
	"📡",
	"🛰️",
	"🧯",
	"🪓",
	"🪜",
	"🪣",
	"🪝",
	"🧲",
	"🧰",
	"🗜️",
	"🔩",
	"🪛",
	"🪚",
	"🔧",
	"🔨",
	"⚒️",
	"🛠️",
	"⛏️",
	"⚙️",
	"🔗",
	"⛓️",
	"📎",
	"🖇️",
	"📏",
	"📐",
	"✂️",
	"📌",
	"📍",
	"🗑️",
	"🖌️",
	"🖍️",
	"🖊️",
	"🖋️",
	"✒️",
	"✏️",
	"📝",
	"📒",
	"📔",
	"📕",
	"📓",
	"📗",
	"📘",
	"📙",
	"📚",
	"📖",
	"🔖",
	"🗒️",
	"📄",
	"📃",
	"📋",
	"📇",
	"📑",
	"🗃️",
	"🗄️",
	"🗂️",
	"📂",
	"📁",
	"📰",
	"🗞️",
	"📊",
	"📈",
	"📉",
	"🪧",
	"🪪",
	"🏷️",
	"📦",
	"📫",
	"📪",
	"📬",
	"📭",
	"📮",
	"✉️",
	"📧",
	"📩",
	"📨",
	"💌",
	"📤",
	"📥",
	"🗳️",
	"⏱️",
	"🕛",
	"🕧",
	"🕐",
	"🕜",
	"🕑",
	"🕝",
	"🕒",
	"🕞",
	"🕓",
	"🕟",
	"🕔",
	"🕠",
	"🕕",
	"🕡",
	"🕖",
	"🕢",
	"🕗",
	"🕣",
	"🕘",
	"🕤",
	"🕙",
	"🕥",
	"🕚",
	"🕦",
	"⌛",
	"⏳",
	"🕰️",
	"⌚",
	"⏲️",
	"⏰",
	"🗓️",
	"📅",
	"📆",
	"🛎️",
	"🔔",
	"📯",
	"📢",
	"📣",
	"🔍",
	"🔎",
	"🔮",
	"🧿",
	"🪬",
	"📿",
	"🏺",
	"⚱️",
	"⚰️",
	"🪦",
	"🚬",
	"💣",
	"🪤",
	"📜",
	"⚔️",
	"🗡️",
	"🛡️",
	"🗝️",
	"🔑",
	"🔐",
	"🔏",
	"🔒",
	"🔓",
	"❤️",
	"🧡",
	"💛",
	"💚",
	"💙",
	"💜",
	"🤎",
	"🖤",
	"🤍",
	"🔴",
	"🟠",
	"🟡",
	"🟢",
	"🔵",
	"🟣",
	"🟤",
	"⚫",
	"⚪",
	"🟥",
	"🟧",
	"🟨",
	"🟩",
	"🟦",
	"🟪",
	"🟫",
	"⬛",
	"⬜",
	"♈",
	"♉",
	"♊",
	"♋",
	"♌",
	"♍",
	"♎",
	"♏",
	"♐",
	"♑",
	"♒",
	"♓",
	"⛎",
	"♀️",
	"♂️",
	"⚧️",
	"🔻",
	"🔺",
	"❕",
	"❗",
	"❔",
	"❓",
	"⁉️",
	"‼️",
	"⭕",
	"❌",
	"🚫",
	"🚳",
	"🚭",
	"🚯",
	"🚱",
	"🚷",
	"📵",
	"🔞",
	"🔕",
	"🔇",
	"🅰️",
	"🆎",
	"🅱️",
	"🅾️",
	"🆑",
	"🆘",
	"🛑",
	"⛔",
	"📛",
	"♨️",
	"🉐",
	"㊙️",
	"㊗️",
	"🈴",
	"🈵",
	"🈹",
	"🈲",
	"🉑",
	"🈶",
	"🈚",
	"🈸",
	"🈺",
	"🈷️",
	"🔶",
	"🔸",
	"🔆",
	"🔅",
	"✴️",
	"🆚",
	"🎦",
	"📶",
	"🔁",
	"🔂",
	"🔀",
	"▶️",
	"⏩",
	"⏭️",
	"⏯️",
	"◀️",
	"⏪",
	"⏮️",
	"🔼",
	"⏫",
	"🔽",
	"⏬",
	"⏸️",
	"⏹️",
	"⏺️",
	"⏏️",
	"📴",
	"📳",
	"📲",
	"🔈",
	"🔉",
	"🔊",
	"🎼",
	"🎵",
	"🎶",
	"☢️",
	"☣️",
	"⚠️",
	"🚸",
	"⚜️",
	"🔱",
	"〽️",
	"🔰",
	"✳️",
	"❇️",
	"♻️",
	"💱",
	"💲",
	"💹",
	"🈯",
	"❎",
	"✅",
	"✔️",
	"☑️",
	"⬆️",
	"↗️",
	"➡️",
	"↘️",
	"⬇️",
	"↙️",
	"⬅️",
	"↖️",
	"↕️",
	"↔️",
	"↩️",
	"↪️",
	"⤴️",
	"⤵️",
	"🔃",
	"🔄",
	"🔙",
	"🔛",
	"🔝",
	"🔚",
	"🔜",
	"🆕",
	"🆓",
	"🆙",
	"🆗",
	"🆒",
	"🆖",
	"ℹ️",
	"🅿️",
	"🈁",
	"🈂️",
	"🈳",
	"🔣",
	"🔤",
	"🔠",
	"🔡",
	"🔢",
	"#️⃣",
	"*️⃣",
	"0️⃣",
	"1️⃣",
	"2️⃣",
	"3️⃣",
	"4️⃣",
	"5️⃣",
	"6️⃣",
	"7️⃣",
	"8️⃣",
	"9️⃣",
	"🔟",
	"💠",
	"🔷",
	"🔹",
	"🌐",
	"🏧",
	"Ⓜ️",
	"🚾",
	"🚻",
	"🚹",
	"🚺",
	"♿",
	"🚼",
	"🛗",
	"🚮",
	"🚰",
	"🛂",
	"🛃",
	"🛄",
	"🛅",
	"💟",
	"⚛️",
	"🛐",
	"🕉️",
	"☸️",
	"☮️",
	"☯️",
	"☪️",
	"✝️",
	"☦️",
	"✡️",
	"🔯",
	"🕎",
	"♾️",
	"🆔",
	"⚕️",
	"✖️",
	"➕",
	"➖",
	"➗",
	"🟰",
	"➰",
	"➿",
	"〰️",
	"©️",
	"®️",
	"™️",
	"♥️",
	"♦️",
	"♣️",
	"♠️",
	"🔘",
	"🔳",
	"◼️",
	"◾",
	"▪️",
	"🔲",
	"◻️",
	"◽",
	"▫️",
	"💭",
	"🗯️",
	"💬",
	"🗨️",
	"👁️‍🗨️",
];

export default function ImposterEmojiGame({
	width = 3,
	time = [5, 3, 10],
	onSuccess,
	onFail,
}) {
	const [game, set_game] = useState({
		width,
		stage: 0,
		correct_indexes: [],
		instruction: "Remember them...",
		score: 0,
		user_clicked: [],
		active: true,
	});
	const [emojis, set_emojis] = useState(
		get_random_samples(range(COLLECTIONS.length), width)
	);

	const handle_time_finished = () => {
		if (game.stage === 0) {
			// start stage 1
			set_game((prev) => ({
				...prev,
				correct_indexes: emojis,
				stage: 1,
				instruction: "Do you know you can't lick your elbow?",
			}));
		} else if (game.stage === 1) {
			set_game((prev) => ({
				...prev,
				stage: 2,
				instruction: "Click on the old emojis",
			}));

			// width -1 because we already have one row
			let new_emojis = get_random_samples(
				range(COLLECTIONS.length),
				width * (width - 1)
			);

			// things never repeats
			while (new_emojis.some((item) => game.correct_indexes.includes(item))) {
				new_emojis = get_random_samples(
					range(COLLECTIONS.length),
					width * (width - 1)
				);
			}

			const shuffled_all_emojis = shuffle([...emojis, ...new_emojis]);
			set_emojis(shuffled_all_emojis);
		} else if (game.stage == 2) {
			if (game.active) {
				onFail({
					score: game.score / width,
					message: "Time and tides waits for none",
				});
				set_game((prev) => ({ ...prev, active: false }));
			}
		}
	};

	const handle_emojis_clicked = (index) => {
		if (game.stage !== 2 || !game.active) {
			return;
		}

		// if in last stage only
		if (game.correct_indexes.includes(index)) {
			// if all imposters found
			if (game.score === width - 1) {
				onSuccess({
					score: 1,
					message: "Are you a memory king?",
				});
				set_game((prev) => ({
					...prev,
					active: false,
					user_clicked: [...prev.user_clicked, index],
				}));
				return;
			}
			set_game((prev) => ({
				...prev,
				score: prev.score + 1,
				user_clicked: [...prev.user_clicked, index],
			}));
		} else {
			set_game((prev) => ({
				...prev,
				user_clicked: [...prev.user_clicked, index],
				active: false,
			}));

			onFail({
				score: game.score / width,
				message: "Oops! I just arrived here",
			});
		}
	};

	return (
		<>
			<header>
				<div>
					<h3>Remember Emojis</h3>
					<p>
						Look at all the emojis carefully for <u>{time[game.stage]} seconds</u>
					</p>
				</div>
				<Timer
					start={time[game?.stage ?? 0]}
					on_time_finished={handle_time_finished}
				/>
			</header>

			<main className={styles["main"]}>
				<p className={styles["instruction"]}>{game.instruction}</p>
				{game.stage !== 1 && (
					<div
						className={styles["emoji_display"]}
						style={{ gridTemplateColumns: `repeat(${width}, auto)` }}
					>
						{emojis.map((item, index) => (
							<button
								key={index}
								onClick={handle_emojis_clicked.bind(null, item)}
								className={
									game.user_clicked.includes(item)
										? styles["button--correct"]
										: ""
								}
							>
								<span>{COLLECTIONS[item]}</span>
							</button>
						))}
					</div>
				)}
			</main>
		</>
	);
}
